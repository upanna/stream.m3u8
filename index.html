<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Local 24/7 TV Channel - Auto-Play Fix</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        /* ဗီဒီယိုကို ဖန်သားပြင် အလယ်တည့်တည့်တွင် ထားရန် CSS */
        body {
            /* Full screen setup */
            height: 100vh;
            margin: 0;
            background-color: #000;
            
            /* Flexbox for perfect centering */
            display: flex;
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            flex-direction: column; /* To stack h2 and video */
            overflow: auto; /* Allow scrolling if content is too large */
        }

        h2 {
            color: white; /* Header text color */
            margin-bottom: 15px;
            /* Adjust position slightly to ensure it's not cut off */
            padding-top: 20px; 
        }

        /* ဗီဒီယိုကို အကြီးဆုံးထားရန် CSS */
        .video-js {
            /* Use viewport units for large screen size */
            width: 90vw !important; /* Viewport အကျယ် ၉၀% */
            height: 50.625vw !important; /* 16:9 ratio (90 * 9 / 16) - For fixed aspect ratio */
            max-width: 1280px !important; /* Optional: Desktop အကြီးဆုံးအရွယ်အစား */
            max-height: 720px !important; /* Optional: Desktop အကြီးဆုံးအရွယ်အစား */
            
            /* Ensure the ratio is maintained on smaller screens */
            max-height: 80vh !important;
            max-width: 100% !important;
        }

        /* Responsive adjustment for small screens */
        @media (max-width: 600px) {
            h2 {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <h2>24/7 Myanmar TV Channel</h2>
    <video
        id="liveVideo"
        class="video-js vjs-default-skin"
        /* width="640" height="360" attributes are now overridden by CSS */
        controls
        autoplay
        loop
        muted /* <<<<< FIX: ဖွင့်လိုက်တာနဲ့ တန်းပွင့်စေဖို့ ဒီ attribute ကို ထည့်လိုက်ပါပြီ။ */
        preload="auto" /* ဗီဒီယိုကို ချက်ချင်းစတင် Load စေရန် */
    >
        <source src="videos/video1.mp4" type="video/mp4" />
    </video>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script>
        const schedule = [
            {filename: "videos/video1.mp4", start: "08:00", end: "12:00"},
            {filename: "videos/video2.mp4", start: "12:00", end: "18:00"},
            {filename: "videos/video3.mp4", start: "18:00", end: "23:59"}
        ];

        const video = document.getElementById('liveVideo');
        
        // Initialize Video.js player instance
        const player = videojs('liveVideo');

        // *** Auto-play Tweak ***
        // player.ready() ကို အသုံးပြုပြီး Video.js က စနစ်တကျ ready ဖြစ်တာနဲ့ ချက်ချင်း play ခြင်း
        player.ready(function() {
            // Ensure muted is set before trying to play for better browser compatibility
            this.muted(true); 
            
            this.play().catch(error => {
                // Play may still be blocked in some edge cases (e.g., mobile battery saver mode)
                console.log("Auto-play failed, video is likely muted. Please click the play button or unmute.", error);
            });
        });


        function checkSchedule() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2,'0');
            const minutes = now.getMinutes().toString().padStart(2,'0');
            const current = `${hours}:${minutes}`;

            for (const item of schedule) {
                if (current >= item.start && current < item.end) {
                    // Check if the current video source is already set
                    if (!player.currentSrc() || player.currentSrc().split('/').pop() !== item.filename.split('/').pop()) {
                        
                        // Set new source
                        player.src({ type: 'video/mp4', src: item.filename });
                        
                        // Try to play the new source
                        player.play().catch(error => {
                            console.log("Video source changed. Auto-play was blocked. Player will resume when possible.", error);
                        });
                    }
                    return; 
                }
            }
        }

        // Start schedule check immediately
        checkSchedule();
        
        // Continue checking the schedule every 10 seconds
        setInterval(checkSchedule, 10000); 
    </script>
</body>
</html>
